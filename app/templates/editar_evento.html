{% with mensajes = get_flashed_messages(with_categories=true) %} {% if mensajes
%} {% for categoria, mensaje in mensajes %}
<div class="alert alert-{{ categoria }}">{{ mensaje }}</div>
{% endfor %} {% endif %} {% endwith %} {% extends 'base.html' %}
{% block title %}Editar Evento{% endblock %}

{% block content %}
<h1>Editar Evento</h1>
<form action="{{ url_for('eventos_bp.editar_evento', id_evento=evento.id_evento) }}" method="POST">

    <!-- Datos del Evento -->
    <div class="datosEvento">
        <h2>Datos del Evento</h2>

        <input type="text" name="descripcion" placeholder="¿Qué tipo de evento es?" value="{{ evento.descripcion }}" required>
        <input type="number" step="0.01" name="monto_total" placeholder="Monto de Colaboración" value="{{ evento.monto_total }}" required>
        
        <div>
            <div>
                <label>Fecha Inicio*</label>
                <input type="date" name="fecha_inicio" value="{{ evento.fecha_inicio.strftime('%Y-%m-%d') }}" required>
                <label>Hora Inicio</label>
                <input type="time" name="hora_inicio" value="{{ evento.fecha_inicio.strftime('%H:%M') }}">
            </div>
            <div>
                <label>Fecha Fin*</label>
                <input type="date" name="fecha_fin" value="{{ evento.fecha_fin.strftime('%Y-%m-%d') }}" required>
                <label>Hora Final</label>
                <input type="time" name="hora_fin" value="{{ evento.fecha_fin.strftime('%H:%M') }}">
            </div>
        </div>
        
        <textarea name="observaciones" placeholder="Observaciones">{{ evento.observaciones or '' }}</textarea>
    </div>

    <!-- Responsable del Alquiler -->
    <div class="responsableAlquiler">
        <h2>Responsable del Alquiler</h2>

        <input type="text" name="nombre" placeholder="Nombre*" value="{{ evento.cliente.nombre }}" required>
        <input type="text" name="apellido" placeholder="Apellido*" value="{{ evento.cliente.apellido }}" required>
        <input type="text" name="telefono" placeholder="Teléfono*" value="{{ evento.cliente.telefono }}" required>
        <input type="text" name="institucion" placeholder="Institución a la que pertenece" value="{{ evento.cliente.institucion or '' }}">
    </div>

    <!-- Responsable de la Llave -->
    <div class="responsableLlave">
        <h2>Responsable de la Llave</h2>

        <input type="text" name="nombre_apertura" placeholder="Nombre (Apertura)"
               value="{{ evento.responsable_apertura.nombre if evento.responsable_apertura else '' }}">
        <input type="text" name="apellido_apertura" placeholder="Apellido (Apertura)"
               value="{{ evento.responsable_apertura.apellido if evento.responsable_apertura else '' }}">

        <input type="text" name="nombre_cierre" placeholder="Nombre (Cierre)"
               value="{{ evento.responsable_cierre.nombre if evento.responsable_cierre else '' }}">
        <input type="text" name="apellido_cierre" placeholder="Apellido (Cierre)"
               value="{{ evento.responsable_cierre.apellido if evento.responsable_cierre else '' }}">
    </div>

    <!-- Acciones -->
    <div class="acciones">
        <button type="submit" class="btn btn-add">Guardar Cambios</button>
        <a href="{{ url_for('eventos_bp.eventos') }}" class="btn btn-cancel">Cancelar</a>
    </div>

</form>
{% endblock %}
