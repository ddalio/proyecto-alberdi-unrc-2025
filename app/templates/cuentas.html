{% extends 'base.html' %} {% block title%} Cuentas {% endblock %} {% block content %}

<div
  class="d-flex justify-content-center align-items-center"
  style="height: 100vh;"
>
  <!-- Card centrado y con layout flex-column para que la fila central crezca -->
  <div class="card d-flex flex-column shadow p-4 w-100" style="width: 80vw; max-width: 1100px; height: 90vh;">
    <!-- Row superior (no centrado interior) -->
    <div class="row">
      <form action="/buscar" method="get" class="mb-4 w-100">
        <div class="position-relative w-100" style="max-width: 400px;">
          <input
            type="search"
            name="q"
            class="form-control pe-5"
            placeholder="Ingrese un usuario..."
          />
          <button
            type="submit"
            class="btn btn-link position-absolute top-50 end-0 translate-middle-y me-2 p-0 text-muted"
            aria-label="Buscar"
          >
            <i class="bi bi-search"></i>
          </button>
        </div>
      </form>
    </div>

    <!-- Row central: ocupa todo el espacio disponible y hace scroll si hace falta -->
    <div class="row flex-grow-1 overflow-auto">
      <div class="col-12">
        <table class="table table-striped table-hover w-100">
          <thead>
            <tr>
              <th>Nombre Usuario</th>
              <th>Nombre</th>
              <th>Apellido</th>
              <th>Email</th>
              <th>Rol</th>
            </tr>
          </thead>
          <tbody>
            {% for cuenta in list_cuentas | reverse %}
            <tr>
              <td>{{cuenta.nombre_usuario}}</td>
              <td>{{cuenta.nombre}}</td>
              <td>{{cuenta.apellido}}</td>
              <td>{{cuenta.email}}</td>
              <td>{{cuenta.rol }}</td>
              <td class="acciones">
                <a href="#" class="me-3">ğŸ“„</a>
                <a href="#" class="me-3">âœï¸</a>
                <form
                  action="{{ url_for('cuentas.eliminar_cuenta', nombre_usuario=cuenta.nombre_usuario) }}"
                  method="POST"
                  style="display: inline"
                >
                  <button type="submit" class="btn btn-link p-0">ğŸ—‘ï¸</button>
                </form>
              </td>
            </tr>
            {% endfor %}
            <!--si no hay datos: <tr><td colspan="6">No hay usuarios cargados</td></tr>  -->
          </tbody>
        </table>
      </div>
    </div>

    <!-- Row inferior: botones centrados en el extremo inferior -->
    <div class="row">
      <div class="col-12 d-flex justify-content-center align-items-center mt-3">
        <div class="d-flex flex-row gap-4">
          <a href="{{ url_for('cuentas.crear_cuenta') }}" class="btn btn-custom px-4 py-2">AÃ±adir Usuario</a>
          <a href="/" class="btn btn-outline-secondary px-4 py-2">Volver</a>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
